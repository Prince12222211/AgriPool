{% extends 'base.html' %}

{% block title %}My Land Parcels - AgriPool{% endblock %}

{% block content %}
<div class="container mt-4">
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h3><i class="fas fa-leaf me-2"></i>My Land Parcels</h3>
    <a href="{% url 'create_land_parcel' %}" class="btn btn-success"><i class="fas fa-plus me-2"></i>Add Land Parcel</a>
  </div>

  {% if parcels %}
  <div class="table-responsive">
    <table class="table table-striped align-middle">
      <thead>
        <tr>
          <th>Name</th>
          <th>Area (acres)</th>
          <th>Soil</th>
          <th>Location</th>
          <th>Plans</th>
          <th></th>
        </tr>
      </thead>
      <tbody>
        {% for p in parcels %}
        <tr class="fertilizer-card">
          <td>{{ p.parcel_name }}</td>
          <td>{{ p.area }}</td>
          <td>{{ p.get_soil_type_display }}</td>
          <td>{{ p.village }}, {{ p.district }}, {{ p.state }}</td>
          <td>{{ p.fertilizer_plans.count }}</td>
          <td class="text-end">
            <a class="btn btn-outline-primary btn-sm" href="{% url 'land_parcel_detail' p.pk %}"><i class="fas fa-eye me-1"></i>View</a>
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
  {% else %}
    <div class="card">
      <div class="card-body text-center py-5">
        <p class="text-muted mb-3">No land parcels yet.</p>
        <a href="{% url 'create_land_parcel' %}" class="btn btn-success">Add your first parcel</a>
      </div>
    </div>
  {% endif %}
</div>
{% endblock %}
